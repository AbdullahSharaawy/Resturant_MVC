<style>
    .gemini-response-textarea {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #444; /* Consistent with other form elements */
        background-color: #2c2c2c; /* Consistent dark background */
        color: #f0f0f0; /* Light text color for readability */
        border-radius: 8px; /* Consistent rounded corners */
        font-size: 16px; /* Standard font size */
        line-height: 1.6; /* Improved line spacing for multi-line text */
        resize: vertical; /* Allow vertical resizing, but not horizontal */
        transition: all 0.3s;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2); /* Subtle inner shadow for depth */
    }

        .gemini-response-textarea:focus {
            border-color: #ffc107; /* Gold highlight on focus, consistent with the review form */
            box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25), inset 0 2px 4px rgba(0, 0, 0, 0.2);
            background-color: #333;
        }
</style>
<label for="gemini-response">Gemini's Response</label>
<textarea id="gemini-response" class="gemini-response-textarea" rows="10" readonly></textarea>
<button id="sendBtn">send</button>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const chatArea = document.getElementById('gemini-response');
        const mealIngredients = 'Grilled salmon, quinoa, avocado, spinach, olive oil, lemon';
        const sendBtn = document.getElementById('sendBtn');

        // When button is clicked
        sendBtn.addEventListener('click', sendMessage);

        function sendMessage() {
            const userMessage = `Provide a comprehensive nutritional analysis of the following meal based solely on its ingredients. Structure the response as follows:

    1. **Meal Ingredients:** ${mealIngredients}

    2. **Nutritional Composition:** (Summarize macros/micros per serving—calories, protein, carbs, fats, fiber, vitamins, minerals, etc.)

    3. **Health Benefits:** (Explain benefits linked to each ingredient, e.g., antioxidants, heart health, digestion.)

    4. **Potential Drawbacks:** (Note excess sugars, sodium, allergens, or harmful compounds like saturated fats.)

    5. **Dietary Compatibility:** (Is it vegan/keto/gluten-free? Adaptations for diets.)

    Use scientific accuracy and cite key nutrients (e.g., 'quercetin in onions'). Keep explanations concise but evidence-based.`;

            // Clear and show typing indicator
            chatArea.value = 'Bot: Analyzing...\n';

            // Send message to backend
            fetch('/Gemini/SendMessage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: userMessage
                })
            })
                .then(res => res.json())
                .then(data => {
                    chatArea.value = `Bot: ${data.answer || "No data returned"}\n`;
                })
                .catch(() => {
                    chatArea.value = 'Bot: Error connecting.\n';
                });
        }
    });
</script>
